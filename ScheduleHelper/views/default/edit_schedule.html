{{response.files.append(URL(r=request,c='static',f='css/schedule.css'))}}
{{extend 'layout.html'}}

<table onmousedown='return false;'>
	<h2>Click and drag on blocks of availability</h2>
    <tr>
        <th><b>Monday</b></th>
        <th><b>Tuesday</b></th>
        <th><b>Wednesday</b></th>
        <th><b>Thursday</b></th>
        <th><b>Friday</b></th>
        <th><b>Saturday</b></th>
        <th><b>Sunday</b></th>
    </tr>
	<!--
    <tr>
        <td class='timecell'>12:00AM</td>
        <td class='timecell'>12:00AM</td>
        <td class='timecell'>12:00AM</td>
        <td class='timecell'>12:00AM</td>
        <td class='timecell'>12:00AM</td>
        <td class='timecell'>12:00AM</td>
        <td class='timecell'>12:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>12:30AM</td>
        <td class='timecell'>12:30AM</td>
        <td class='timecell'>12:30AM</td>
        <td class='timecell'>12:30AM</td>
        <td class='timecell'>12:30AM</td>
        <td class='timecell'>12:30AM</td>
        <td class='timecell'>12:30AM</td>
    </tr>
    <tr>
        <td class='timecell'>1:00AM</td>
        <td class='timecell'>1:00AM</td>
        <td class='timecell'>1:00AM</td>
        <td class='timecell'>1:00AM</td>
        <td class='timecell'>1:00AM</td>
        <td class='timecell'>1:00AM</td>
        <td class='timecell'>1:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>1:30AM</td>
        <td class='timecell'>1:30AM</td>
        <td class='timecell'>1:30AM</td>
        <td class='timecell'>1:30AM</td>
        <td class='timecell'>1:30AM</td>
        <td class='timecell'>1:30AM</td>
        <td class='timecell'>1:30AM</td>
    </tr>
    <tr>
        <td class='timecell'>2:00AM</td>
        <td class='timecell'>2:00AM</td>
        <td class='timecell'>2:00AM</td>
        <td class='timecell'>2:00AM</td>
        <td class='timecell'>2:00AM</td>
        <td class='timecell'>2:00AM</td>
        <td class='timecell'>2:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>2:30AM</td>
        <td class='timecell'>2:30AM</td>
        <td class='timecell'>2:30AM</td>
        <td class='timecell'>2:30AM</td>
        <td class='timecell'>2:30AM</td>
        <td class='timecell'>2:30AM</td>
        <td class='timecell'>2:30AM</td>
    </tr>
    <tr>
        <td class='timecell'>3:00AM</td>
        <td class='timecell'>3:00AM</td>
        <td class='timecell'>3:00AM</td>
        <td class='timecell'>3:00AM</td>
        <td class='timecell'>3:00AM</td>
        <td class='timecell'>3:00AM</td>
        <td class='timecell'>3:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>3:30AM</td>
        <td class='timecell'>3:30AM</td>
        <td class='timecell'>3:30AM</td>
        <td class='timecell'>3:30AM</td>
        <td class='timecell'>3:30AM</td>
        <td class='timecell'>3:30AM</td>
        <td class='timecell'>3:30AM</td>
    </tr>
    <tr>
        <td class='timecell'>4:00AM</td>
        <td class='timecell'>4:00AM</td>
        <td class='timecell'>4:00AM</td>
        <td class='timecell'>4:00AM</td>
        <td class='timecell'>4:00AM</td>
        <td class='timecell'>4:00AM</td>
        <td class='timecell'>4:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>4:30AM</td>
        <td class='timecell'>4:30AM</td>
        <td class='timecell'>4:30AM</td>
        <td class='timecell'>4:30AM</td>
        <td class='timecell'>4:30AM</td>
        <td class='timecell'>4:30AM</td>
        <td class='timecell'>4:30AM</td>
    </tr>
    <tr>
        <td class='timecell'>5:00AM</td>
        <td class='timecell'>5:00AM</td>
        <td class='timecell'>5:00AM</td>
        <td class='timecell'>5:00AM</td>
        <td class='timecell'>5:00AM</td>
        <td class='timecell'>5:00AM</td>
        <td class='timecell'>5:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>5:30AM</td>
        <td class='timecell'>5:30AM</td>
        <td class='timecell'>5:30AM</td>
        <td class='timecell'>5:30AM</td>
        <td class='timecell'>5:30AM</td>
        <td class='timecell'>5:30AM</td>
        <td class='timecell'>5:30AM</td>
    </tr>
    <tr>
        <td class='timecell'>6:00AM</td>
        <td class='timecell'>6:00AM</td>
        <td class='timecell'>6:00AM</td>
        <td class='timecell'>6:00AM</td>
        <td class='timecell'>6:00AM</td>
        <td class='timecell'>6:00AM</td>
        <td class='timecell'>6:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>6:30AM</td>
        <td class='timecell'>6:30AM</td>
        <td class='timecell'>6:30AM</td>
        <td class='timecell'>6:30AM</td>
        <td class='timecell'>6:30AM</td>
        <td class='timecell'>6:30AM</td>
        <td class='timecell'>6:30AM</td>
    </tr>
    <tr>
        <td class='timecell'>7:00AM</td>
        <td class='timecell'>7:00AM</td>
        <td class='timecell'>7:00AM</td>
        <td class='timecell'>7:00AM</td>
        <td class='timecell'>7:00AM</td>
        <td class='timecell'>7:00AM</td>
        <td class='timecell'>7:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>7:30AM</td>
        <td class='timecell'>7:30AM</td>
        <td class='timecell'>7:30AM</td>
        <td class='timecell'>7:30AM</td>
        <td class='timecell'>7:30AM</td>
        <td class='timecell'>7:30AM</td>
        <td class='timecell'>7:30AM</td>
    </tr>
	-->
    <tr>
        <td class='timecell'>8:00AM</td>
        <td class='timecell'>8:00AM</td>
        <td class='timecell'>8:00AM</td>
        <td class='timecell'>8:00AM</td>
        <td class='timecell'>8:00AM</td>
        <td class='timecell'>8:00AM</td>
        <td class='timecell'>8:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>8:30AM</td>
        <td class='timecell'>8:30AM</td>
        <td class='timecell'>8:30AM</td>
        <td class='timecell'>8:30AM</td>
        <td class='timecell'>8:30AM</td>
        <td class='timecell'>8:30AM</td>
        <td class='timecell'>8:30AM</td>
    </tr>
    <tr>
        <td class='timecell'>9:00AM</td>
        <td class='timecell'>9:00AM</td>
        <td class='timecell'>9:00AM</td>
        <td class='timecell'>9:00AM</td>
        <td class='timecell'>9:00AM</td>
        <td class='timecell'>9:00AM</td>
        <td class='timecell'>9:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>9:30AM</td>
        <td class='timecell'>9:30AM</td>
        <td class='timecell'>9:30AM</td>
        <td class='timecell'>9:30AM</td>
        <td class='timecell'>9:30AM</td>
        <td class='timecell'>9:30AM</td>
        <td class='timecell'>9:30AM</td>
    </tr>
    <tr>
        <td class='timecell'>10:00AM</td>
        <td class='timecell'>10:00AM</td>
        <td class='timecell'>10:00AM</td>
        <td class='timecell'>10:00AM</td>
        <td class='timecell'>10:00AM</td>
        <td class='timecell'>10:00AM</td>
        <td class='timecell'>10:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>10:30AM</td>
        <td class='timecell'>10:30AM</td>
        <td class='timecell'>10:30AM</td>
        <td class='timecell'>10:30AM</td>
        <td class='timecell'>10:30AM</td>
        <td class='timecell'>10:30AM</td>
        <td class='timecell'>10:30AM</td>
    </tr>
    <tr>
        <td class='timecell'>11:00AM</td>
        <td class='timecell'>11:00AM</td>
        <td class='timecell'>11:00AM</td>
        <td class='timecell'>11:00AM</td>
        <td class='timecell'>11:00AM</td>
        <td class='timecell'>11:00AM</td>
        <td class='timecell'>11:00AM</td>
    </tr>
    <tr>
        <td class='timecell'>11:30AM</td>
        <td class='timecell'>11:30AM</td>
        <td class='timecell'>11:30AM</td>
        <td class='timecell'>11:30AM</td>
        <td class='timecell'>11:30AM</td>
        <td class='timecell'>11:30AM</td>
        <td class='timecell'>11:30AM</td>
    </tr>
    <tr>
        <td class='timecell'>12:00PM</td>
        <td class='timecell'>12:00PM</td>
        <td class='timecell'>12:00PM</td>
        <td class='timecell'>12:00PM</td>
        <td class='timecell'>12:00PM</td>
        <td class='timecell'>12:00PM</td>
        <td class='timecell'>12:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>12:30PM</td>
        <td class='timecell'>12:30PM</td>
        <td class='timecell'>12:30PM</td>
        <td class='timecell'>12:30PM</td>
        <td class='timecell'>12:30PM</td>
        <td class='timecell'>12:30PM</td>
        <td class='timecell'>12:30PM</td>
    </tr>    
	<tr>
        <td class='timecell'>1:00PM</td>
        <td class='timecell'>1:00PM</td>
        <td class='timecell'>1:00PM</td>
        <td class='timecell'>1:00PM</td>
        <td class='timecell'>1:00PM</td>
        <td class='timecell'>1:00PM</td>
        <td class='timecell'>1:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>1:30PM</td>
        <td class='timecell'>1:30PM</td>
        <td class='timecell'>1:30PM</td>
        <td class='timecell'>1:30PM</td>
        <td class='timecell'>1:30PM</td>
        <td class='timecell'>1:30PM</td>
        <td class='timecell'>1:30PM</td>
    </tr>    
	<tr>
        <td class='timecell'>2:00PM</td>
        <td class='timecell'>2:00PM</td>
        <td class='timecell'>2:00PM</td>
        <td class='timecell'>2:00PM</td>
        <td class='timecell'>2:00PM</td>
        <td class='timecell'>2:00PM</td>
        <td class='timecell'>2:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>2:30PM</td>
        <td class='timecell'>2:30PM</td>
        <td class='timecell'>2:30PM</td>
        <td class='timecell'>2:30PM</td>
        <td class='timecell'>2:30PM</td>
        <td class='timecell'>2:30PM</td>
        <td class='timecell'>2:30PM</td>
    </tr>    
	<tr>
        <td class='timecell'>3:00PM</td>
        <td class='timecell'>3:00PM</td>
        <td class='timecell'>3:00PM</td>
        <td class='timecell'>3:00PM</td>
        <td class='timecell'>3:00PM</td>
        <td class='timecell'>3:00PM</td>
        <td class='timecell'>3:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>3:30PM</td>
        <td class='timecell'>3:30PM</td>
        <td class='timecell'>3:30PM</td>
        <td class='timecell'>3:30PM</td>
        <td class='timecell'>3:30PM</td>
        <td class='timecell'>3:30PM</td>
        <td class='timecell'>3:30PM</td>
    </tr>    
	<tr>
        <td class='timecell'>4:00PM</td>
        <td class='timecell'>4:00PM</td>
        <td class='timecell'>4:00PM</td>
        <td class='timecell'>4:00PM</td>
        <td class='timecell'>4:00PM</td>
        <td class='timecell'>4:00PM</td>
        <td class='timecell'>4:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>4:30PM</td>
        <td class='timecell'>4:30PM</td>
        <td class='timecell'>4:30PM</td>
        <td class='timecell'>4:30PM</td>
        <td class='timecell'>4:30PM</td>
        <td class='timecell'>4:30PM</td>
        <td class='timecell'>4:30PM</td>
    </tr>    
	<tr>
        <td class='timecell'>5:00PM</td>
        <td class='timecell'>5:00PM</td>
        <td class='timecell'>5:00PM</td>
        <td class='timecell'>5:00PM</td>
        <td class='timecell'>5:00PM</td>
        <td class='timecell'>5:00PM</td>
        <td class='timecell'>5:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>5:30PM</td>
        <td class='timecell'>5:30PM</td>
        <td class='timecell'>5:30PM</td>
        <td class='timecell'>5:30PM</td>
        <td class='timecell'>5:30PM</td>
        <td class='timecell'>5:30PM</td>
        <td class='timecell'>5:30PM</td>
    </tr>    
	<tr>
        <td class='timecell'>6:00PM</td>
        <td class='timecell'>6:00PM</td>
        <td class='timecell'>6:00PM</td>
        <td class='timecell'>6:00PM</td>
        <td class='timecell'>6:00PM</td>
        <td class='timecell'>6:00PM</td>
        <td class='timecell'>6:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>6:30PM</td>
        <td class='timecell'>6:30PM</td>
        <td class='timecell'>6:30PM</td>
        <td class='timecell'>6:30PM</td>
        <td class='timecell'>6:30PM</td>
        <td class='timecell'>6:30PM</td>
        <td class='timecell'>6:30PM</td>
    </tr>    
	<tr>
        <td class='timecell'>7:00PM</td>
        <td class='timecell'>7:00PM</td>
        <td class='timecell'>7:00PM</td>
        <td class='timecell'>7:00PM</td>
        <td class='timecell'>7:00PM</td>
        <td class='timecell'>7:00PM</td>
        <td class='timecell'>7:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>7:30PM</td>
        <td class='timecell'>7:30PM</td>
        <td class='timecell'>7:30PM</td>
        <td class='timecell'>7:30PM</td>
        <td class='timecell'>7:30PM</td>
        <td class='timecell'>7:30PM</td>
        <td class='timecell'>7:30PM</td>
    </tr>    
	<tr>
        <td class='timecell'>8:00PM</td>
        <td class='timecell'>8:00PM</td>
        <td class='timecell'>8:00PM</td>
        <td class='timecell'>8:00PM</td>
        <td class='timecell'>8:00PM</td>
        <td class='timecell'>8:00PM</td>
        <td class='timecell'>8:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>8:30PM</td>
        <td class='timecell'>8:30PM</td>
        <td class='timecell'>8:30PM</td>
        <td class='timecell'>8:30PM</td>
        <td class='timecell'>8:30PM</td>
        <td class='timecell'>8:30PM</td>
        <td class='timecell'>8:30PM</td>
    </tr>    
	<tr>
        <td class='timecell'>9:00PM</td>
        <td class='timecell'>9:00PM</td>
        <td class='timecell'>9:00PM</td>
        <td class='timecell'>9:00PM</td>
        <td class='timecell'>9:00PM</td>
        <td class='timecell'>9:00PM</td>
        <td class='timecell'>9:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>9:30PM</td>
        <td class='timecell'>9:30PM</td>
        <td class='timecell'>9:30PM</td>
        <td class='timecell'>9:30PM</td>
        <td class='timecell'>9:30PM</td>
        <td class='timecell'>9:30PM</td>
        <td class='timecell'>9:30PM</td>
    </tr>    
	<tr>
        <td class='timecell'>10:00PM</td>
        <td class='timecell'>10:00PM</td>
        <td class='timecell'>10:00PM</td>
        <td class='timecell'>10:00PM</td>
        <td class='timecell'>10:00PM</td>
        <td class='timecell'>10:00PM</td>
        <td class='timecell'>10:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>10:30PM</td>
        <td class='timecell'>10:30PM</td>
        <td class='timecell'>10:30PM</td>
        <td class='timecell'>10:30PM</td>
        <td class='timecell'>10:30PM</td>
        <td class='timecell'>10:30PM</td>
        <td class='timecell'>10:30PM</td>
    </tr>    
	<tr>
        <td class='timecell'>11:00PM</td>
        <td class='timecell'>11:00PM</td>
        <td class='timecell'>11:00PM</td>
        <td class='timecell'>11:00PM</td>
        <td class='timecell'>11:00PM</td>
        <td class='timecell'>11:00PM</td>
        <td class='timecell'>11:00PM</td>
    </tr>
    <tr>
        <td class='timecell'>11:30PM</td>
        <td class='timecell'>11:30PM</td>
        <td class='timecell'>11:30PM</td>
        <td class='timecell'>11:30PM</td>
        <td class='timecell'>11:30PM</td>
        <td class='timecell'>11:30PM</td>
        <td class='timecell'>11:30PM</td>
    </tr>
</table>

<button id='submit'>Save Schedule</button>

<script>
	var schedule = [[], [], [], [], [], [], []];
	var change_to = 'unknown';
	isMouseDown = false;
	
	$('body').mousedown(function() {
        isMouseDown = true;
    })
    .mouseup(function() {
        isMouseDown = false;
		change_to = 'unknown';
    });
	$('table tr td').mouseenter(function() {
        if(isMouseDown) {
			selectCell(this);
		}
    });
	$('table tr td').mousedown(function() {
		selectCell(this);
	});
	
	function selectCell(cell) {
		if (change_to == 'unknown') {
			if (cell.style.backgroundColor == '' || cell.style.backgroundColor == 'white') {
				change_to = 'teal';
			}
			else {
				change_to = 'white';
			}
		}
		$(cell).css({backgroundColor:change_to});
		var time = cell.innerHTML;
		ampm = time.substr(time.length - 2, 2);
		time = time.replace(':', '');
		time = parseInt(time.substr(0, time.length - 2));
		if (ampm == "PM" && time < 1200)
			time += 1200;
		if (change_to == 'teal' && schedule[cell.cellIndex].indexOf(time) == -1)
			schedule[cell.cellIndex].push(time);
		else if (change_to == 'white' && schedule[cell.cellIndex].indexOf(time) != -1){
			schedule[cell.cellIndex].splice(schedule[cell.cellIndex].indexOf(time), 1);
		}
	}
	
    $(document).ready(function() {
        $("#submit").click(function() {
            for (i = 0; i < schedule.length; i++) {
				schedule[i] = schedule[i].sort(function(a, b){return a-b});
			}
			///////////////////////////////////////////TODO/////////////////////////////////////////////////
			//	schedule array is now sorted. schedule[0] contains a sorted list of all 30 minute blocks of 
			//	availability for monday, schedule[1] is for tuesday, etc.
			//  we need to store this in the database via ajax
			////////////////////////////////////////////////////////////////////////////////////////////////
        });
    });
</script>
